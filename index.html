<!doctype html>
<html lang="es">
<head>
  <meta charset="utf-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1" />
  <title>Cuenta atr√°s: ¬°vuelta al sushi!</title>
  <meta name="description" content="Cuenta atr√°s personalizable para el gran d√≠a de volver a comer sushi." />
  <link rel="icon" href="data:image/svg+xml,<svg xmlns='http://www.w3.org/2000/svg' viewBox='0 0 100 100'><text y='0.9em' font-size='90'>üç£</text></svg>">
  <link href="https://fonts.googleapis.com/css2?family=Inter:wght@400;600;800&display=swap" rel="stylesheet">
  <style>
    :root{--bg:#0f172a;--text:#e5e7eb;--muted:#9ca3af;--ring:#334155;--card:#0b1222;--accent:#ff7a59}
    *{box-sizing:border-box} html,body{height:100%}
    body{margin:0;font-family:Inter,system-ui,Segoe UI,Roboto,Helvetica,Arial,sans-serif;color:var(--text);
         background:radial-gradient(1200px 800px at 80% -20%, #1f2937 0, transparent 50%),
                    radial-gradient(1000px 600px at -20% 20%, #0b1222 0, transparent 60%), #0f172a}
    .wrap{max-width:920px;margin:0 auto;padding:24px}
    header{display:flex;gap:14px;align-items:center;justify-content:space-between;margin:10px 0 24px}
    .brand{display:flex;gap:12px;align-items:center}.logo{font-size:30px}.title{font-weight:800;font-size:22px}
    .card{background:linear-gradient(180deg,rgba(255,255,255,.02),rgba(255,255,255,.01));border:1px solid #1f2937;
          box-shadow:0 10px 30px rgba(0,0,0,.35);border-radius:18px;padding:18px}
    .grid{display:grid;grid-template-columns:1.1fr .9fr;gap:18px}@media(max-width:860px){.grid{grid-template-columns:1fr}}
    .clock{display:flex;flex-wrap:wrap;gap:10px;justify-content:center;margin-top:6px}
    .pill{min-width:120px;flex:1 1 160px;background:var(--card);border:1px solid #1e293b;border-radius:16px;padding:16px;text-align:center}
    .num{font-size:42px;font-weight:800;line-height:1}.lbl{font-size:12px;color:var(--muted);text-transform:uppercase;letter-spacing:1px;margin-top:6px}
    .controls{display:grid;gap:12px}label{font-size:13px;color:var(--muted);display:block;margin-bottom:6px}
    input[type="date"],input[type="text"]{width:100%;padding:12px 14px;border-radius:12px;background:#0b1222;color:var(--text);
      border:1px solid #1f2937;outline:none} input:focus{border-color:#334155;box-shadow:0 0 0 4px rgba(51,65,85,.35)}
    .btns{display:flex;flex-wrap:wrap;gap:10px} button,.ghost{appearance:none;border:none;cursor:pointer;padding:12px 16px;border-radius:12px;font-weight:600}
    .primary{background:linear-gradient(180deg,#ff7a59,#f97316);color:#0b1222}.secondary{background:#111827;color:#e5e7eb;border:1px solid #374151}
    .ghost{background:transparent;color:var(--muted)}
    .ring-wrap{position:relative;display:grid;place-items:center;margin:8px auto;width:280px;height:280px}
    svg{overflow:visible}.ring-bg{stroke:var(--ring);opacity:.6}.ring{stroke:var(--accent);filter:drop-shadow(0 0 8px rgba(249,115,22,.45))}
    .ring-text{position:absolute;text-align:center}.ring-text .big{font-size:44px;font-weight:800}.ring-text .small{font-size:12px;color:var(--muted)}
    .tips{display:grid;gap:10px;margin-top:6px}.tip{background:#0b1222;border:1px dashed #334155;padding:12px 14px;border-radius:12px;font-size:14px}
    footer{margin-top:18px;color:var(--muted);font-size:12px;text-align:center}
    .confetti{position:fixed;inset:0;pointer-events:none;overflow:hidden}.piece{position:absolute;font-size:24px;animation:fall linear forwards}
    @keyframes fall{to{transform:translate3d(var(--x),110vh,0) rotate(var(--rot));opacity:.9}}
    .success{color:#bbf7d0}.danger{color:#fecaca}
    .hidden{display:none}
    .sushi-grid{display:grid;grid-template-columns:repeat(5,1fr);gap:10px;font-size:32px;padding:12px;background:#0b1222;
      border:1px solid #1e293b;border-radius:12px;text-align:center}
  </style>
</head>
<body>
  <div class="wrap">
    <header>
      <div class="brand">
        <div class="logo" aria-hidden="true">üç£</div>
        <div>
          <div class="title">Cuenta atr√°s: ¬°vuelta al sushi!</div>
          <div style="color:var(--muted);font-size:12px">Hazlo personal, comparte el enlace y suelta confeti cuando llegue el d√≠a.</div>
        </div>
      </div>
      <a class="ghost" id="aboutBtn" href="#">¬øC√≥mo funciona?</a>
    </header>

    <div class="grid">
      <!-- IZQUIERDA: anillo + contador -->
      <section class="card">
        <div class="ring-wrap" aria-live="polite" aria-atomic="true">
          <svg width="280" height="280" viewBox="0 0 120 120" role="img" aria-label="Progreso hasta el D√≠a del Sushi">
            <defs>
              <linearGradient id="grad" x1="0%" y1="0%" x2="100%" y2="0%">
                <stop offset="0%" stop-color="#ff7a59"/><stop offset="100%" stop-color="#f59e0b"/>
              </linearGradient>
            </defs>
            <circle class="ring-bg" cx="60" cy="60" r="52" fill="none" stroke-width="8" />
            <circle class="ring" id="ring" cx="60" cy="60" r="52" fill="none" stroke-width="8" stroke-linecap="round" transform="rotate(-90 60 60)" stroke="url(#grad)" stroke-dasharray="0 999" />
          </svg>
          <div class="ring-text">
            <div class="small">Falta</div>
            <div class="big" id="bigDays">‚Äì</div>
            <div class="small" id="bigLabel">d√≠as</div>
          </div>
        </div>

        <div class="clock" id="clock">
          <div class="pill"><div class="num" id="d">‚Äì</div><div class="lbl">D√≠as</div></div>
          <div class="pill"><div class="num" id="h">‚Äì</div><div class="lbl">Horas</div></div>
          <div class="pill"><div class="num" id="m">‚Äì</div><div class="lbl">Minutos</div></div>
          <div class="pill"><div class="num" id="s">‚Äì</div><div class="lbl">Segundos</div></div>
        </div>
        <div id="status" style="text-align:center;margin-top:10px"></div>
      </section>

      <!-- DERECHA: controles -->
      <aside class="card">
        <div class="controls">
          <div>
            <label for="name">Nombre de la homenajeada (opcional)</label>
            <input id="name" type="text" placeholder="Ej.: Marta" autocomplete="name" />
          </div>
          <div>
            <label for="date">D√≠a del sushi (elige la fecha objetivo)</label>
            <input id="date" type="date" />
          </div>
          <div class="btns">
            <button class="primary" id="save">Guardar y generar enlace</button>
            <button class="secondary" id="share">Compartir</button>
            <button class="secondary" id="ics">A√±adir al calendario (.ics)</button>
            <button class="ghost" id="reset">Reiniciar</button>
          </div>
        </div>

        <!-- Modo compartido (sin tips) -->
        <div id="shareArt" class="hidden">
          <div class="sushi-grid" aria-hidden="true">
            üç£ üçô ü•¢ üç§ üç• 
            üç£ üçô ü•¢ üç§ üç• 
            üç£ üçô ü•¢ üç§ üç•
          </div>
          <div style="font-size:14px;color:var(--muted);margin-top:8px;text-align:center">
            ¬°Listo para compartir! (sin spoilers üòâ)
          </div>
        </div>

        <!-- Tips solo para edici√≥n -->
        <div id="tips" class="tips">
          <div class="tip">Idea: mete el enlace en un QR y p√©galo en una cajita de palillos. Clase y maldad a partes iguales.</div>
          <div class="tip">Antojos mientras tanto: maki de aguacate, tamago (tortilla), uramaki California cocido. Si hay dudas, consulta con su profesional de salud.</div>
          <div class="tip">Truco: puedes pasar la URL con la fecha y el nombre ya metidos para que aparezca todo bonito al abrir.</div>
        </div>
      </aside>
    </div>

    <footer>Hecho con ‚ù§Ô∏è y humor. No es consejo m√©dico; elige la fecha que m√°s ilusi√≥n os haga.</footer>
  </div>

  <div class="confetti" id="confetti" aria-hidden="true"></div>

  <!-- JS externo (forzamos actualizaci√≥n con ?v=3) -->
  <script src="app.js?v=3" defer></script>
</body>
</html>
